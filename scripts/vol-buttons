#!/bin/bash

# Monitor button presses
device="/dev/input/event4"  # Replace with the actual device path
evtest "$device" | while read -r line; do
  # Extract the key code and value from the event
  key_code=$(echo "$line" | grep -oP 'code \K[0-9]+')
  key_value=$(echo "$line" | grep -oP 'value \K[0-9]+')

  # Handle button presses (example: volume control)
  if [ "$key_code" == "103" ] && [ "$key_value" == "1" ]; then
    if pgrep -x "wofi" > /dev/null; then
      # do nothing if wofi is running
      :
    else
      wtype -P XF86AudioRaiseVolume
    fi
  elif [ "$key_code" == "108" ] && [ "$key_value" == "1" ]; then
    if pgrep -x "wofi" > /dev/null; then
      # do nothing if wofi is running
      :
    else
      wtype -P XF86AudioLowerVolume
    fi
  fi
done &